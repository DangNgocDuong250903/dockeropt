# Giáº£i thÃ­ch nÃºt RUN vs DEPLOY

## ğŸ® 2 NÃºt trong giao diá»‡n http://127.0.0.1:5173/

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  script.sh                                                    â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚
â”‚                                     [Deploy]  [Run]           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸš€ **RUN** (NÃºt mÃ u xanh dÆ°Æ¡ng-tÃ­m)

### NghÄ©a lÃ  gÃ¬?
**Cháº¡y script NGAY trÃªn mÃ¡y local** (mÃ¡y Ä‘ang cháº¡y web server)

### Hoáº¡t Ä‘á»™ng nhÆ° tháº¿ nÃ o?
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Browser   â”‚  Click  â”‚ Web Server  â”‚
â”‚             â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚ (Local PC)  â”‚
â”‚ Click [Run] â”‚         â”‚             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚ Execute     â”‚
                        â”‚ script.sh   â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚   Result    â”‚
                        â”‚   + Log     â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### VÃ­ dá»¥:
```powershell
# Báº¡n click [Run] trÃªn script "test.sh"
# â†’ Web server cháº¡y: bash test.sh
# â†’ Káº¿t quáº£ hiá»‡n trong log
# â†’ Tá»± Ä‘á»™ng chuyá»ƒn Ä‘áº¿n trang xem log
```

### Khi nÃ o dÃ¹ng?
- âœ… Test script nhanh
- âœ… Cháº¡y script trÃªn mÃ¡y local
- âœ… Script setup/config cho mÃ¡y hiá»‡n táº¡i
- âœ… Scripts khÃ´ng cáº§n deploy lÃªn server

### LÆ°u Ã½:
- âš ï¸ Script cháº¡y trÃªn mÃ¡y **local** (Windows/Linux nÆ¡i web cháº¡y)
- âš ï¸ Cáº§n cÃ³ mÃ´i trÆ°á»ng phÃ¹ há»£p (bash, python, powershell...)
- âš ï¸ Quyá»n truy cáº­p lÃ  quyá»n cá»§a user cháº¡y web server

---

## ğŸŒ **DEPLOY** (NÃºt mÃ u xanh lÃ¡)

### NghÄ©a lÃ  gÃ¬?
**Triá»ƒn khai script lÃªn cÃ¡c VM/Server tá»« xa** qua SSH

### Hoáº¡t Ä‘á»™ng nhÆ° tháº¿ nÃ o?
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Browser   â”‚  Click  â”‚ Web Server  â”‚   SSH   â”‚  Remote VM  â”‚
â”‚             â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚ (Local PC)  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚ (Server 1)  â”‚
â”‚Click[Deploy]â”‚         â”‚             â”‚         â”‚             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚ 1. Copy     â”‚         â”‚ 2. Receive  â”‚
                        â”‚    script   â”‚         â”‚    script   â”‚
                        â”‚ 2. SSH      â”‚         â”‚ 3. Execute  â”‚
                        â”‚    connect  â”‚         â”‚    (optional)â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚                       â”‚
                              â–¼                       â”‚
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
                        â”‚ Select VMs  â”‚               â”‚
                        â”‚ - Server 1 â˜‘â”‚               â”‚
                        â”‚ - Server 2 â˜‘â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚ - Server 3 â˜â”‚
                        â”‚             â”‚
                        â”‚ [Deploy Now]â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Quy trÃ¬nh chi tiáº¿t:
```
1. Click [Deploy] button
   â†“
2. Má»Ÿ trang Deploy page
   â†“
3. Chá»n target VMs (servers)
   â˜‘ hk-vps-01
   â˜‘ sg-vps-02
   â˜ us-vps-03
   â†“
4. Cáº¥u hÃ¬nh options:
   - Destination path: /opt/scripts/setup.sh
   - â˜‘ Execute after deploy
   â†“
5. Click [Deploy to VMs]
   â†“
6. System thá»±c hiá»‡n:
   a. Connect SSH Ä‘áº¿n tá»«ng VM
   b. Copy script file qua SFTP
   c. (Optional) Execute script on VM
   d. Show káº¿t quáº£ real-time
```

### VÃ­ dá»¥ thá»±c táº¿:

#### VÃ­ dá»¥ 1: Deploy vÃ  cháº¡y
```
Script: install-xray.sh

Click [Deploy]
â†’ Chá»n: hk-vps-01, sg-vps-02
â†’ Path: /tmp/install-xray.sh
â†’ â˜‘ Execute after deploy
â†’ Click [Deploy]

Káº¿t quáº£:
âœ… hk-vps-01: Uploaded + Executed (Exit: 0)
âœ… sg-vps-02: Uploaded + Executed (Exit: 0)
```

#### VÃ­ dá»¥ 2: Chá»‰ upload, khÃ´ng cháº¡y
```
Script: config.json

Click [Deploy]
â†’ Chá»n: All VMs
â†’ Path: /etc/app/config.json
â†’ â˜ Execute after deploy (uncheck)
â†’ Click [Deploy]

Káº¿t quáº£:
âœ… hk-vps-01: Uploaded
âœ… sg-vps-02: Uploaded
âœ… us-vps-03: Uploaded
```

### Khi nÃ o dÃ¹ng?
- âœ… Deploy script lÃªn nhiá»u servers
- âœ… Update configuration files
- âœ… Batch deployment
- âœ… Setup scripts cho VPS má»›i
- âœ… Update/patch scripts trÃªn production

### LÆ°u Ã½:
- âš ï¸ Cáº§n configure VMs trÆ°á»›c (trong VM Manager)
- âš ï¸ Cáº§n SSH keys hoáº·c password
- âš ï¸ Script cháº¡y trÃªn **remote server** (khÃ´ng pháº£i local)
- âš ï¸ CÃ³ thá»ƒ deploy song song nhiá»u VMs (parallel)

---

## ğŸ“Š So sÃ¡nh RUN vs DEPLOY

| TiÃªu chÃ­ | ğŸš€ RUN | ğŸŒ DEPLOY |
|----------|--------|-----------|
| **Cháº¡y á»Ÿ Ä‘Ã¢u** | MÃ¡y local | Server tá»« xa (VMs) |
| **Káº¿t ná»‘i** | KhÃ´ng cáº§n | Cáº§n SSH |
| **Sá»‘ lÆ°á»£ng** | 1 mÃ¡y (local) | Nhiá»u VMs |
| **Tá»‘c Ä‘á»™** | Nhanh | Phá»¥ thuá»™c network |
| **Use case** | Test, local setup | Production deploy |
| **Log** | Local log file | Remote execution log |
| **Quyá»n háº¡n** | Local user | Remote SSH user |

---

## ğŸ¯ Workflow thá»±c táº¿

### Scenario 1: Test â†’ Deploy
```
1. Viáº¿t script: setup-xray.sh
2. Click [Run] Ä‘á»ƒ test local
3. Xem log, check lá»—i
4. Fix bugs
5. Click [Run] láº¡i Ä‘á»ƒ test
6. Khi OK â†’ Click [Deploy]
7. Deploy lÃªn production servers
```

### Scenario 2: Mass deployment
```
1. CÃ³ 10 VPS cáº§n setup
2. Viáº¿t script: auto-setup.sh
3. Test báº±ng [Run] trÃªn local
4. Click [Deploy]
5. Chá»n táº¥t cáº£ 10 VMs
6. Enable "Execute after deploy"
7. Deploy song song (parallel)
8. Xem results real-time
```

### Scenario 3: Config update
```
1. Update file: nginx.conf
2. KhÃ´ng cáº§n [Run] (chá»‰ lÃ  config)
3. Click [Deploy]
4. Chá»n web servers
5. Path: /etc/nginx/nginx.conf
6. Uncheck "Execute" (khÃ´ng pháº£i script)
7. Deploy
8. SSH vÃ o restart nginx
```

---

## ğŸ’¡ Tips & Best Practices

### Khi dÃ¹ng RUN:
```bash
âœ… DO:
- Test scripts trÆ°á»›c
- Cháº¡y safe scripts
- Scripts cáº§n output ngay

âŒ DON'T:
- Scripts cáº§n root (náº¿u web cháº¡y user thÆ°á»ng)
- Scripts cháº¡y lÃ¢u (>5 phÃºt)
- Scripts destructive
```

### Khi dÃ¹ng DEPLOY:
```bash
âœ… DO:
- Test local trÆ°á»›c
- Backup trÆ°á»›c khi deploy
- Deploy láº§n lÆ°á»£t tá»«ng VM (test nhá» trÆ°á»›c)
- Check SSH connection trÆ°á»›c

âŒ DON'T:
- Deploy untested scripts
- Deploy to all production cÃ¹ng lÃºc
- Forget to check destination path
- Deploy vá»›i wrong SSH keys
```

---

## ğŸ”§ Troubleshooting

### RUN fails:
```
Q: Click [Run] nhÆ°ng script khÃ´ng cháº¡y?
A: Check:
   - Script cÃ³ executable permission?
   - MÃ´i trÆ°á»ng cÃ³ Ä‘Ãºng? (bash/python installed?)
   - Path cÃ³ Ä‘Ãºng khÃ´ng?
   - Check logs trong /logs
```

### DEPLOY fails:
```
Q: Click [Deploy] nhÆ°ng failed?
A: Check:
   - VM cÃ³ trong config khÃ´ng?
   - SSH connection OK? (test vá»›i: vm test server-name)
   - SSH key Ä‘Ãºng chÆ°a?
   - Destination path cÃ³ quyá»n write?
   - Network/firewall cÃ³ block?
```

---

## ğŸ“ TÃ³m táº¯t

### ğŸš€ **RUN Button**
```
CÃI NÃ€Y = Cháº¡y script trÃªn mÃ¡y MÃ€Y (local)
```

### ğŸŒ **DEPLOY Button**  
```
CÃI NÃ€Y = Gá»­i script lÃªn SERVER (remote VMs)
```

---

## ğŸ¬ Demo Commands

### Test RUN:
```bash
# 1. Start web server
python auto.py scripts start

# 2. Open browser: http://127.0.0.1:5173/

# 3. Click [Run] on any script

# 4. See logs at: http://127.0.0.1:5173/logs
```

### Test DEPLOY:
```bash
# 1. Add VM first
python auto.py vm quick-add root@your-server.com

# 2. Test connection
python auto.py vm test 1

# 3. Start web server
python auto.py scripts start

# 4. Open: http://127.0.0.1:5173/

# 5. Click [Deploy] on script

# 6. Select VMs â†’ Deploy
```

---

**Hiá»ƒu chÆ°a? ğŸ˜Š**

- **RUN** = Cháº¡y local (nhÆ° double click file)
- **DEPLOY** = Gá»­i lÃªn server + cháº¡y remote (nhÆ° scp + ssh)

